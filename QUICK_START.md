# è‰å±¯ç¾é£Ÿè½‰ç›¤ - å¿«é€Ÿé–‹å§‹æŒ‡å—

## ğŸš€ 5åˆ†é˜å¿«é€Ÿéƒ¨ç½²

### æ­¥é©Ÿ 1: ç’°å¢ƒæº–å‚™

ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ï¼š
- Node.js 22 æˆ–æ›´é«˜ç‰ˆæœ¬
- pnpm 10 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬

```bash
# æª¢æŸ¥ç‰ˆæœ¬
node --version  # æ‡‰è©² >= 22.0.0
pnpm --version  # æ‡‰è©² >= 10.0.0
mysql --version # æ‡‰è©² >= 8.0.0
```

### æ­¥é©Ÿ 2: å®‰è£ä¾è³´

```bash
cd /home/ubuntu
pnpm install
```

### æ­¥é©Ÿ 3: è¨­å®šç’°å¢ƒè®Šæ•¸

å»ºç«‹ `.env` æª”æ¡ˆï¼š

```bash
# è¤‡è£½ç¯„ä¾‹æª”æ¡ˆ
cp .env.example .env

# ç·¨è¼¯ç’°å¢ƒè®Šæ•¸
nano .env
```

**æœ€å°å¿…è¦è¨­å®š**ï¼š
```env
VITE_APP_TITLE=è‰å±¯ç¾é£Ÿè½‰ç›¤
VITE_APP_ID=food-roulette-app
VITE_OAUTH_PORTAL_URL=https://manus.im
OAUTH_SERVER_URL=https://api.manus.im
DATABASE_URL=mysql://user:password@localhost:3306/food_roulette
JWT_SECRET=your-random-secret-key-here
```

### æ­¥é©Ÿ 4: åˆå§‹åŒ–è³‡æ–™åº«

```bash
# å»ºç«‹è³‡æ–™åº«
mysql -u root -p -e "CREATE DATABASE food_roulette CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# åŸ·è¡Œ migration
pnpm db:push
```

### æ­¥é©Ÿ 5: å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
pnpm dev
```

é–‹å•Ÿç€è¦½å™¨è¨ªå•: `http://localhost:3000`

---

## ğŸ¯ ç¬¬ä¸€æ¬¡ä½¿ç”¨

### 1. ç™»å…¥ç³»çµ±

é»æ“Šå³ä¸Šè§’ã€Œç™»å…¥ / è¨»å†Šã€æŒ‰éˆ•ï¼Œä½¿ç”¨ Manus å¸³è™Ÿç™»å…¥ã€‚

### 2. é€²å…¥å¾Œå°ç®¡ç†

è¨ªå• `http://localhost:3000/admin`ï¼Œä½¿ç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥ã€‚

### 3. æ–°å¢ç¬¬ä¸€å®¶åº—å®¶

1. é»æ“Šã€Œåº—å®¶ç®¡ç†ã€
2. é»æ“Šã€Œæ–°å¢åº—å®¶ã€
3. å¡«å¯«åº—å®¶è³‡è¨Šï¼š
   - åº—å®¶åç¨±: ä¾‹å¦‚ã€Œé˜¿æ˜ç‰›è‚‰éºµã€
   - åœ°å€: å®Œæ•´åœ°å€
   - é›»è©±: åº—å®¶é›»è©±
   - æè¿°: ç°¡çŸ­ä»‹ç´¹
   - ç‡Ÿæ¥­æ™‚é–“: è¨­å®šæ¯æ—¥ç‡Ÿæ¥­æ™‚æ®µ

4. é»æ“Šã€Œå„²å­˜ã€

### 4. æ–°å¢å„ªæƒ åˆ¸

1. é»æ“Šã€Œå„ªæƒ åˆ¸ç®¡ç†ã€
2. é»æ“Šã€Œæ–°å¢å„ªæƒ åˆ¸ã€
3. å¡«å¯«å„ªæƒ åˆ¸è³‡è¨Šï¼š
   - é¸æ“‡åº—å®¶
   - å„ªæƒ åˆ¸æ¨™é¡Œ: ä¾‹å¦‚ã€Œ9æŠ˜å„ªæƒ åˆ¸ã€
   - æè¿°: å„ªæƒ å…§å®¹èªªæ˜
   - é¡å‹: é¸æ“‡å„ªæƒ åˆ¸é¡å‹
   - æœ‰æ•ˆæœŸé™: è¨­å®šéæœŸæ™‚é–“

4. é»æ“Šã€Œå„²å­˜ã€

### 5. æ¸¬è©¦è½‰ç›¤åŠŸèƒ½

1. å›åˆ°é¦–é  `http://localhost:3000`
2. é»æ“Šã€Œé–‹å§‹æŠ½çã€æŒ‰éˆ•
3. è½‰ç›¤æœƒè‡ªå‹•æ—‹è½‰ä¸¦åœåœ¨æŠ½ä¸­çš„åº—å®¶
4. æŸ¥çœ‹ç²å¾—çš„å„ªæƒ åˆ¸

---

## ğŸ“¦ ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²

### æ–¹æ³• 1: åœ¨ Manus å¹³å°éƒ¨ç½² (æ¨è–¦)

é€™å€‹å°ˆæ¡ˆæ˜¯ç‚º Manus å¹³å°è¨­è¨ˆçš„ï¼Œå»ºè­°åœ¨ Manus å¹³å°ä¸Šéƒ¨ç½²ä»¥ç²å¾—å®Œæ•´åŠŸèƒ½æ”¯æ´ã€‚

1. å°‡å°ˆæ¡ˆæ¨é€åˆ° Git å„²å­˜åº«
2. åœ¨ Manus å¹³å°å»ºç«‹æ–°å°ˆæ¡ˆ
3. é€£æ¥ Git å„²å­˜åº«
4. è¨­å®šç’°å¢ƒè®Šæ•¸
5. éƒ¨ç½²å°ˆæ¡ˆ

### æ–¹æ³• 2: å‚³çµ±ä¼ºæœå™¨éƒ¨ç½²

```bash
# 1. å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
pnpm build

# 2. è¨­å®šç”Ÿç”¢ç’°å¢ƒè®Šæ•¸
export NODE_ENV=production
export PORT=3000

# 3. å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
pnpm start

# æˆ–ä½¿ç”¨ PM2 ç®¡ç†
pm2 start dist/index.js --name food-roulette
```

### æ–¹æ³• 3: Docker éƒ¨ç½²

```bash
# å»ºç½® Docker æ˜ åƒ
docker build -t food-roulette .

# åŸ·è¡Œå®¹å™¨
docker run -d \
  --name food-roulette \
  -p 3000:3000 \
  -e DATABASE_URL="mysql://user:password@host:3306/database" \
  -e JWT_SECRET="your-secret" \
  food-roulette
```

---

## ğŸ”§ å¸¸è¦‹å•é¡Œ

### Q1: è½‰ç›¤é¡¯ç¤ºã€Œç›®å‰æ²’æœ‰ç‡Ÿæ¥­çš„åº—å®¶ã€

**åŸå› **: 
- è³‡æ–™åº«ä¸­æ²’æœ‰åº—å®¶è³‡æ–™
- æˆ–ç•¶å‰æ™‚æ®µæ²’æœ‰åº—å®¶ç‡Ÿæ¥­

**è§£æ±º**:
1. é€²å…¥å¾Œå°æ–°å¢åº—å®¶
2. ç¢ºèªåº—å®¶ç‡Ÿæ¥­æ™‚é–“è¨­å®šæ­£ç¢º
3. ç¢ºèªåº—å®¶ç‹€æ…‹ç‚ºã€Œå•Ÿç”¨ã€

### Q2: ç„¡æ³•ç™»å…¥å¾Œå°

**åŸå› **:
- å¸³è™Ÿæ²’æœ‰ç®¡ç†å“¡æ¬Šé™

**è§£æ±º**:
1. ç¢ºèª `.env` ä¸­çš„ `OWNER_OPEN_ID` è¨­å®šæ­£ç¢º
2. æˆ–åœ¨è³‡æ–™åº«ä¸­æ‰‹å‹•è¨­å®šä½¿ç”¨è€…è§’è‰²ç‚º `admin`

```sql
UPDATE users SET role = 'admin' WHERE openId = 'your-openid';
```

### Q3: å„ªæƒ åˆ¸ç„¡æ³•å…Œæ›

**åŸå› **:
- å„ªæƒ åˆ¸å·²éæœŸ
- å„ªæƒ åˆ¸å·²è¢«ä½¿ç”¨

**è§£æ±º**:
1. æª¢æŸ¥å„ªæƒ åˆ¸æœ‰æ•ˆæœŸé™
2. ç¢ºèªå„ªæƒ åˆ¸ç‹€æ…‹ç‚ºã€Œæœªä½¿ç”¨ã€

### Q4: æ¨æ’­é€šçŸ¥ç„¡æ³•æ”¶åˆ°

**åŸå› **:
- ç€è¦½å™¨æœªæˆæ¬Šé€šçŸ¥æ¬Šé™

**è§£æ±º**:
1. åœ¨ç€è¦½å™¨è¨­å®šä¸­å…è¨±é€šçŸ¥
2. ç¢ºèªç¶²ç«™ä½¿ç”¨ HTTPS

---

## ğŸ“Š æ–°å¢æ¸¬è©¦è³‡æ–™

ä½¿ç”¨å…§å»ºçš„æ¸¬è©¦è³‡æ–™è…³æœ¬ï¼š

```bash
# æ–°å¢5å®¶æ¸¬è©¦åº—å®¶å’Œ15å¼µå„ªæƒ åˆ¸
node seed_test_data.mjs
```

æˆ–æ‰‹å‹•ä½¿ç”¨ SQLï¼š

```sql
-- æ–°å¢æ¸¬è©¦åº—å®¶
INSERT INTO restaurants (name, address, phone, description, operatingHours, isActive) 
VALUES (
  'é˜¿æ˜ç‰›è‚‰éºµ',
  'å—æŠ•ç¸£è‰å±¯é®ä¸­æ­£è·¯123è™Ÿ',
  '049-2345678',
  'å‚³çµ±æ‰‹å·¥ç‰›è‚‰éºµï¼Œæ¹¯é ­æ¿ƒéƒ',
  '{"monday":"10:00-21:00","tuesday":"10:00-21:00","wednesday":"10:00-21:00","thursday":"10:00-21:00","friday":"10:00-21:00","saturday":"10:00-21:00","sunday":"10:00-21:00"}',
  true
);

-- æ–°å¢æ¸¬è©¦å„ªæƒ åˆ¸
INSERT INTO coupons (restaurantId, title, description, type, isActive)
VALUES (
  1,
  '9æŠ˜å„ªæƒ åˆ¸',
  'å…¨å“é …9æŠ˜å„ªæƒ ',
  'discount',
  true
);
```

---

## ğŸ¨ è‡ªè¨‚è¨­å®š

### ä¿®æ”¹æ‡‰ç”¨ç¨‹å¼åç¨±

ç·¨è¼¯ `.env` æª”æ¡ˆï¼š
```env
VITE_APP_TITLE=æ‚¨çš„æ‡‰ç”¨ç¨‹å¼åç¨±
```

### ä¿®æ”¹ä¸»è‰²èª¿

ç·¨è¼¯ `client/src/index.css`ï¼š
```css
:root {
  --primary-color: #FF6B35; /* ä¿®æ”¹ç‚ºæ‚¨æƒ³è¦çš„é¡è‰² */
}
```

### ä¿®æ”¹ Logo

æ›¿æ› `client/public/logo.png` æª”æ¡ˆã€‚

### ä¿®æ”¹è½‰ç›¤æ¨£å¼

åœ¨å¾Œå°ç®¡ç† > è‡ªè¨‚è½‰ç›¤æ¨£å¼ä¸­è¨­å®šã€‚

---

## ğŸ“± æ‰‹æ©Ÿæ¸¬è©¦

### åœ¨æ‰‹æ©Ÿä¸Šæ¸¬è©¦

1. ç¢ºä¿æ‰‹æ©Ÿå’Œé›»è…¦åœ¨åŒä¸€ç¶²è·¯
2. æ‰¾åˆ°é›»è…¦çš„ IP ä½å€ï¼š
   ```bash
   # macOS/Linux
   ifconfig | grep inet
   
   # Windows
   ipconfig
   ```
3. åœ¨æ‰‹æ©Ÿç€è¦½å™¨è¨ªå•: `http://YOUR_IP:3000`

### å®‰è£ç‚º PWA

1. åœ¨æ‰‹æ©Ÿç€è¦½å™¨è¨ªå•ç¶²ç«™
2. é»æ“Šã€Œå®‰è£åˆ°ä¸»ç•«é¢ã€
3. ç¢ºèªå®‰è£
4. å¾ä¸»ç•«é¢å•Ÿå‹• App

---

## ğŸ” å®‰å…¨æ€§æª¢æŸ¥æ¸…å–®

éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒå‰ï¼Œè«‹ç¢ºèªï¼š

- [ ] ä¿®æ”¹ `JWT_SECRET` ç‚ºéš¨æ©Ÿå­—ä¸²
- [ ] è¨­å®šå¼·å¯†ç¢¼çš„è³‡æ–™åº«å¸³è™Ÿ
- [ ] å•Ÿç”¨ HTTPS
- [ ] è¨­å®šé˜²ç«ç‰†è¦å‰‡
- [ ] é™åˆ¶è³‡æ–™åº«é ç«¯å­˜å–
- [ ] å®šæœŸå‚™ä»½è³‡æ–™åº«
- [ ] è¨­å®š CORS ç™½åå–®
- [ ] å•Ÿç”¨ Rate Limiting

---

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–å»ºè­°

### è³‡æ–™åº«å„ªåŒ–
```sql
-- æ–°å¢ç´¢å¼•
CREATE INDEX idx_restaurants_isActive ON restaurants(isActive);
CREATE INDEX idx_coupons_restaurantId ON coupons(restaurantId);
CREATE INDEX idx_spinHistory_userId ON spinHistory(userId);
CREATE INDEX idx_spinHistory_createdAt ON spinHistory(createdAt);
```

### å¿«å–è¨­å®š

åœ¨ Nginx ä¸­è¨­å®šéœæ…‹è³‡æºå¿«å–ï¼š
```nginx
location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

---

## ğŸ†˜ éœ€è¦å¹«åŠ©ï¼Ÿ

- ğŸ“– å®Œæ•´æ–‡ä»¶: æŸ¥çœ‹ `PROJECT_DOCUMENTATION.md`
- ğŸ› å›å ±å•é¡Œ: GitHub Issues
- ğŸ’¬ æŠ€è¡“æ”¯æ´: https://help.manus.im
- ğŸ“§ è¯çµ¡æˆ‘å€‘: support@example.com

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
