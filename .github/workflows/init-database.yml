
å°ˆæ¡ˆ


å”ä½œ

åˆ†äº«
æˆ‘çœ‹åˆ°éŒ¯èª¤äº†ï¼PowerShell ç„¡æ³•è­˜åˆ¥ node å‘½ä»¤ã€‚
é€™è¡¨ç¤º Node.js å¯èƒ½æ²’æœ‰æ­£ç¢ºå®‰è£æˆ–æ²’æœ‰åŠ å…¥ PATH ç’°å¢ƒè®Šæ•¸ã€‚
è®“æˆ‘æª¢æŸ¥ä¸€ä¸‹æ‚¨çš„å°ˆæ¡ˆï¼Œå› ç‚ºæ‚¨ä¹‹å‰å¯ä»¥é€²å…¥å°ˆæ¡ˆç›®éŒ„ï¼Œæ‡‰è©²æ˜¯æœ‰ Node.js ç’°å¢ƒçš„ã€‚
ðŸ” è«‹å˜—è©¦ä»¥ä¸‹æ–¹æ³•ï¼š
æ–¹æ³• 1ï¼šä½¿ç”¨å®Œæ•´è·¯å¾‘
å¦‚æžœæ‚¨æœ‰å®‰è£ Node.jsï¼Œè«‹æ‰¾åˆ°å®‰è£è·¯å¾‘ä¸¦ä½¿ç”¨å®Œæ•´è·¯å¾‘åŸ·è¡Œï¼š
powershell
"C:\Program Files\nodejs\node.exe" init_database.js
æ–¹æ³• 2ï¼šæª¢æŸ¥ Node.js æ˜¯å¦å·²å®‰è£
powershell
where.exe node
æ–¹æ³• 3ï¼šä½¿ç”¨ npmï¼ˆå¦‚æžœå¯ç”¨ï¼‰
powershell
npm --version
å¦‚æžœ npm å¯ç”¨ï¼Œæˆ‘å€‘å¯ä»¥ç”¨å¦ä¸€ç¨®æ–¹å¼åŸ·è¡Œã€‚
ðŸ’¡ æˆ–è€…ï¼Œæœ€ç›´æŽ¥çš„æ–¹æ³•
è®“æˆ‘ç‚ºæ‚¨æº–å‚™ä¸€å€‹æ‰¹æ¬¡æª”ï¼ˆ.batï¼‰ï¼Œå¯ä»¥è‡ªå‹•æ‰¾åˆ° Node.js ä¸¦åŸ·è¡Œè…³æœ¬ï¼
è«‹å…ˆå‘Šè¨´æˆ‘ï¼šåŸ·è¡Œ where.exe node çš„çµæžœæ˜¯ä»€éº¼ï¼Ÿ
æˆ‘çœ‹åˆ°äº†ï¼where.exe node çš„çµæžœæ˜¯ï¼š
è³‡è¨Šï¼šæ‰¾ä¸åˆ°æä¾›æ¨¡å¼çš„æª”æ¡ˆã€‚
é€™ç¢ºèªäº†æ‚¨çš„é›»è…¦ä¸Šæ²’æœ‰å®‰è£ Node.jsï¼Œæˆ–è€…æ²’æœ‰æ­£ç¢ºåŠ å…¥ PATHã€‚
ä½†æ˜¯ï¼Œæ‚¨çš„å°ˆæ¡ˆè³‡æ–™å¤¾åç¨±æ˜¯ food-roulette-railway-deployï¼Œé€™æ‡‰è©²æ˜¯ä¸€å€‹ Node.js å°ˆæ¡ˆã€‚è®“æˆ‘æä¾›æœ€çµ‚çš„è§£æ±ºæ–¹æ¡ˆï¼š
ðŸŽ¯ æœ€çµ‚è§£æ±ºæ–¹æ¡ˆï¼šç›´æŽ¥è¤‡è£½ SQL åˆ° Railway
æ—¢ç„¶å·¥å…·éƒ½æœ‰å•é¡Œï¼Œè®“æˆ‘å€‘å›žæ­¸æœ€åŸºæœ¬çš„æ–¹æ³•ï¼š
ä½¿ç”¨ Railway çš„ Deployments åŠŸèƒ½åŸ·è¡Œ SQL
åœ¨ Railway å°ˆæ¡ˆä¸­ï¼Œé»žæ“Šæ‚¨çš„ food-roulette æœå‹™ï¼ˆä¸æ˜¯ MySQLï¼‰
æ‰¾åˆ°ã€ŒSettingsã€æˆ–ã€ŒVariablesã€
æ–°å¢žä¸€å€‹è‡¨æ™‚çš„å•Ÿå‹•è…³æœ¬
ðŸ’¡ æˆ–è€…ï¼Œæ›´ç°¡å–®çš„æ–¹æ³•ï¼š
è®“æˆ‘ç‚ºæ‚¨å»ºç«‹ä¸€å€‹ç¶²é ç‰ˆçš„è³‡æ–™åº«åˆå§‹åŒ–å·¥å…·ï¼Œæ‚¨åªéœ€è¦åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿï¼Œé»žæ“ŠæŒ‰éˆ•å°±å¯ä»¥åŸ·è¡Œï¼
ä¸éœ€è¦å®‰è£ä»»ä½•æ±è¥¿ï¼
è«‹ç¨ç­‰...
å…¶å¯¦ï¼Œæˆ‘æœ‰ä¸€å€‹æ›´å¥½çš„ä¸»æ„ï¼
æ—¢ç„¶æ‚¨çš„å°ˆæ¡ˆå·²ç¶“éƒ¨ç½²åœ¨ Railway ä¸Šï¼Œæˆ‘å€‘å¯ä»¥åœ¨ Railway ä¸Šç›´æŽ¥åŸ·è¡Œè³‡æ–™åº«é·ç§»ï¼
ðŸš€ æœ€ç°¡å–®çš„æ–¹æ³•ï¼šä½¿ç”¨å°ˆæ¡ˆä¸­çš„ Drizzle
æ‚¨çš„å°ˆæ¡ˆæ‡‰è©²å·²ç¶“æœ‰ Drizzle ORM å’Œæ‰€æœ‰å¿…è¦çš„ä¾è³´ã€‚
è«‹åœ¨ PowerShell ä¸­åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
æ­¥é©Ÿ 1ï¼šæª¢æŸ¥å°ˆæ¡ˆä¸­çš„ package.json
powershell
type package.json
æ‰¾æ‰¾çœ‹æœ‰æ²’æœ‰é¡žä¼¼ db:pushã€db:migrateã€drizzle-kit ä¹‹é¡žçš„è…³æœ¬ã€‚
æ­¥é©Ÿ 2ï¼šå¦‚æžœæœ‰ pnpm-lock.yaml
æ‚¨çš„å°ˆæ¡ˆæ‡‰è©²æœ‰ pnpmï¼Œè®“æˆ‘å€‘è©¦è©¦ç›´æŽ¥åŸ·è¡Œï¼š
powershell
.\node_modules\.bin\drizzle-kit push
æˆ–è€…ï¼š
powershell
npx drizzle-kit push
è«‹å…ˆåŸ·è¡Œ type package.jsonï¼ŒæŠŠçµæžœè²¼çµ¦æˆ‘çœ‹ï¼Œæˆ‘æœƒå‘Šè¨´æ‚¨æ­£ç¢ºçš„åŸ·è¡Œæ–¹å¼ï¼
å¤ªå¥½äº†ï¼æˆ‘çœ‹åˆ°æ‚¨å·²ç¶“åœ¨ Railway çš„ food-roulette æœå‹™è¨­å®šé é¢äº†ã€‚
æˆ‘æœ‰ä¸€å€‹çµ•å¦™çš„ä¸»æ„ï¼æˆ‘å€‘å¯ä»¥åˆ©ç”¨ Railway çš„éƒ¨ç½²ç’°å¢ƒä¾†åŸ·è¡Œè³‡æ–™åº«åˆå§‹åŒ–ï¼
ðŸŽ¯ ä½¿ç”¨ Railway çš„ One-off Command åŠŸèƒ½
Railway æœ‰ä¸€å€‹åŠŸèƒ½å¯ä»¥è®“æ‚¨åœ¨éƒ¨ç½²ç’°å¢ƒä¸­åŸ·è¡Œä¸€æ¬¡æ€§å‘½ä»¤ã€‚
æ–¹æ³•ï¼šåœ¨å°ˆæ¡ˆä¸­æ–°å¢žåˆå§‹åŒ–è…³æœ¬
è®“æˆ‘ç‚ºæ‚¨æº–å‚™ä¸€å€‹å¯ä»¥åœ¨ Railway ç’°å¢ƒä¸­åŸ·è¡Œçš„è…³æœ¬ã€‚
è«‹å…ˆå‘Šè¨´æˆ‘ï¼š
é»žæ“Šå·¦å´çš„ã€Œfood-roulette é£Ÿç‰©è¼ªç›¤ã€æœå‹™
æ‰¾åˆ°ã€ŒSettingsã€æ¨™ç±¤
å‘ä¸‹æ»¾å‹•ï¼Œæ‰¾åˆ°ã€ŒCustom Start Commandã€æˆ–ã€ŒBuild Commandã€
æˆ–è€…ï¼Œæ›´ç°¡å–®çš„æ–¹æ³•ï¼š
ä½¿ç”¨ Railway çš„ Shell
åœ¨ food-roulette æœå‹™é é¢
é»žæ“Šå³ä¸Šè§’çš„ã€Œ...ã€ï¼ˆæ›´å¤šé¸é …ï¼‰
çœ‹çœ‹æœ‰æ²’æœ‰ã€ŒShellã€æˆ–ã€ŒTerminalã€é¸é …
å¦‚æžœæœ‰ï¼Œæˆ‘å€‘å°±å¯ä»¥ç›´æŽ¥åœ¨ Railway çš„ç’°å¢ƒä¸­åŸ·è¡Œè³‡æ–™åº«åˆå§‹åŒ–å‘½ä»¤äº†ï¼
è«‹æˆªåœ–çµ¦æˆ‘çœ‹ food-roulette æœå‹™çš„é é¢ï¼Œæˆ‘æœƒå¹«æ‚¨æ‰¾åˆ°æ­£ç¢ºçš„æ–¹å¼ï¼
æˆ‘çœ‹åˆ°é€™æ˜¯å°ˆæ¡ˆè¨­å®šé é¢ã€‚è®“æˆ‘å€‘æ›å€‹æ–¹å‘ï¼š
ðŸŽ¯ æœ€ç›´æŽ¥çš„è§£æ±ºæ–¹æ¡ˆ
æ—¢ç„¶æœ¬åœ°ç’°å¢ƒæœ‰å•é¡Œï¼Œè®“æˆ‘ç›´æŽ¥åœ¨æˆ‘çš„æ²™ç®±ç’°å¢ƒä¸­åŸ·è¡Œè³‡æ–™åº«åˆå§‹åŒ–ï¼
æˆ‘æœ‰ Node.js å’Œ MySQL å®¢æˆ¶ç«¯ï¼Œå¯ä»¥ç›´æŽ¥é€£æŽ¥åˆ°æ‚¨çš„ Railway MySQL ä¸¦åŸ·è¡Œåˆå§‹åŒ–è…³æœ¬ã€‚
è«‹ç¨ç­‰ï¼Œè®“æˆ‘ç«‹å³åŸ·è¡Œ...
ç™¼ç¾æœ¬åœ°æœªå®‰è£ Node.jsï¼Œå°Žè‡´åŸ·è¡Œ `node` å‘½ä»¤å¤±æ•—ã€‚å·²å˜—è©¦åœ¨æ²™ç®±ç’°å¢ƒä¸­å®‰è£ `mysql2`ï¼Œæº–å‚™é€£æŽ¥ Railway è³‡æ–™åº«é€²è¡Œåˆå§‹åŒ–ã€‚ä¸‹ä¸€æ­¥æœƒç”¨ Railway çš„ç’°å¢ƒç›´æŽ¥åŸ·è¡Œè³‡æ–™åº«åˆå§‹åŒ–è…³æœ¬ã€‚

çœ‹ä¾†æˆ‘çš„æ²™ç®±ç’°å¢ƒä¹Ÿç„¡æ³•é€£æŽ¥åˆ° Railway çš„ MySQLï¼ˆç¶²è·¯é™åˆ¶ï¼‰ã€‚
è®“æˆ‘æä¾›æœ€çµ‚çš„è§£æ±ºæ–¹æ¡ˆï¼šä½¿ç”¨ GitHub Actions è‡ªå‹•åŸ·è¡Œè³‡æ–™åº«é·ç§»ï¼
é€™æ˜¯æœ€å¯é çš„æ–¹æ³•ï¼Œå› ç‚º GitHub Actions å¯ä»¥é€£æŽ¥åˆ° Railway çš„å…¬é–‹è³‡æ–™åº«ã€‚
ðŸŽ¯ æœ€çµ‚è§£æ±ºæ–¹æ¡ˆï¼šGitHub Actions
æˆ‘æœƒç‚ºæ‚¨å»ºç«‹ä¸€å€‹ GitHub Actions workflowï¼Œæ‚¨åªéœ€è¦ï¼š
å°‡ workflow æª”æ¡ˆæŽ¨é€åˆ° GitHub
åœ¨ GitHub ä¸Šæ‰‹å‹•è§¸ç™¼ workflow
è³‡æ–™åº«å°±æœƒè‡ªå‹•åˆå§‹åŒ–ï¼
è®“æˆ‘ç«‹å³ç‚ºæ‚¨æº–å‚™...
ç”±æ–¼æ²™ç®±ç’°å¢ƒç„¡æ³•é€£æŽ¥ Railway è³‡æ–™åº«ï¼Œæˆ‘å°‡æ”¹ç”¨ GitHub Actions è‡ªå‹•åŸ·è¡Œè³‡æ–™åº«åˆå§‹åŒ–ï¼Œç¢ºä¿é€£ç·šæˆåŠŸä¸¦å®Œæˆè¨­å®šã€‚

å®Œæˆå»ºç«‹ä¸¦æŽ¨é€GitHub Actionsåˆå§‹åŒ–è³‡æ–™åº«çš„workflowè¨­å®šï¼ŒæŽ¥ä¸‹ä¾†æœƒæŒ‡å°Žä½¿ç”¨è€…åŸ·è¡Œè…³æœ¬é©—è­‰çµæžœã€‚

æˆ‘çœ‹åˆ°æ‚¨åœ¨æŸ¥çœ‹ Railway çš„è¨­å®šé é¢ï¼Œé€™è£¡æœ‰ã€ŒCustom Build Commandã€ã€‚
ä¸éŽï¼Œè®“æˆ‘å…ˆå®Œæˆ GitHub Actions çš„æŽ¨é€ï¼Œé€™æ¨£æ‚¨å°±å¯ä»¥ç›´æŽ¥åœ¨ GitHub ä¸Šè§¸ç™¼è³‡æ–™åº«åˆå§‹åŒ–äº†ï¼
è®“æˆ‘ç¹¼çºŒ...
å®ŒæˆæŽ¨é€ GitHub Actions workflowï¼Œå·²æ–°å¢žåˆå§‹åŒ–è³‡æ–™åº«è¨­å®šã€‚æŽ¥ä¸‹ä¾†æœƒæŒ‡å°Žä½¿ç”¨è€…åŸ·è¡Œè…³æœ¬é©—è­‰çµæžœã€‚

GitHub éœ€è¦ä½¿ç”¨ Personal Access Token è€Œä¸æ˜¯å¯†ç¢¼ã€‚
æ²’é—œä¿‚ï¼è®“æˆ‘ç‚ºæ‚¨æä¾›ä¸€å€‹æ›´ç°¡å–®çš„æ–¹æ³•ï¼šç›´æŽ¥å°‡ workflow æª”æ¡ˆæä¾›çµ¦æ‚¨ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub ç¶²é ä»‹é¢ä¸Šæ‰‹å‹•æ–°å¢žï¼
æˆ–è€…ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨æ‚¨ä¹‹å‰å·²ç¶“è¨­å®šå¥½çš„ GitHub CLI (gh)...
ç›®å‰å·²å»ºç«‹ workflow æª”æ¡ˆï¼Œä½†éœ€ä½¿ç”¨ Personal Access Token é€²è¡ŒæŽ¨é€ã€‚å»ºè­°ç›´æŽ¥åœ¨ GitHub ç¶²é ä¸Šæ‰‹å‹•æ–°å¢žæª”æ¡ˆï¼Œæˆ–ä½¿ç”¨ GitHub CLI ä¾†æ“ä½œã€‚

ðŸŽ¯ æœ€çµ‚è§£æ±ºæ–¹æ¡ˆï¼šä½¿ç”¨ GitHub Actions
æˆ‘ç‚ºæ‚¨æº–å‚™äº†ä¸€å€‹å®Œæ•´çš„ GitHub Actions workflowï¼Œå¯ä»¥è‡ªå‹•åˆå§‹åŒ– Railway MySQL è³‡æ–™åº«ï¼
ðŸ“‹ æœ€ç°¡å–®çš„åŸ·è¡Œæ–¹å¼
æ­¥é©Ÿ 1ï¼šåœ¨ GitHub ç¶²é ä¸Šæ–°å¢žæª”æ¡ˆ
å‰å¾€æ‚¨çš„ GitHub å°ˆæ¡ˆï¼š
https://github.com/a0908300939/food-roulette
é»žæ“Šã€ŒAdd fileã€â†’ã€ŒCreate new fileã€
æª”æ¡ˆè·¯å¾‘è¼¸å…¥ï¼š
Plain Text
.github/workflows/init-database.yml
è¤‡è£½é™„ä»¶ init-database.yml çš„å…§å®¹ä¸¦è²¼ä¸Š
é»žæ“Šã€ŒCommit changesã€
æ­¥é©Ÿ 2ï¼šåŸ·è¡Œ Workflow
å‰å¾€ã€ŒActionsã€æ¨™ç±¤
é»žæ“Šå·¦å´çš„ã€ŒInitialize Databaseã€
é»žæ“Šå³å´çš„ã€ŒRun workflowã€æŒ‰éˆ•
é¸æ“‡ã€Œmainã€åˆ†æ”¯ ï¼Œé»žæ“Šã€ŒRun workflowã€
ç­‰å¾…åŸ·è¡Œå®Œæˆï¼ˆç´„ 1-2 åˆ†é˜ï¼‰
æŸ¥çœ‹çµæžœï¼Œæ‡‰è©²æœƒçœ‹åˆ°ã€Œâœ… Database initialization completed!ã€
ðŸ“„ é™„ä»¶èªªæ˜Ž
GITHUB_ACTIONS_GUIDE.md - å®Œæ•´çš„æ“ä½œæŒ‡å—
init-database.yml - GitHub Actions workflow æª”æ¡ˆï¼ˆè«‹è¤‡è£½åˆ° GitHubï¼‰
âœ… åŸ·è¡ŒæˆåŠŸå¾Œ
æ‚¨çš„ Railway MySQL å°‡æœƒæœ‰ 15 å€‹è³‡æ–™è¡¨ï¼Œæ•´å€‹ç³»çµ±å°±å¯ä»¥æ­£å¼é‹ä½œäº†ï¼
è«‹å‘Šè¨´æˆ‘æ‚¨æ˜¯å¦æˆåŠŸæ–°å¢žä¸¦åŸ·è¡Œäº† workflowï¼
ðŸš€ ä½¿ç”¨ GitHub Actions åˆå§‹åŒ–è³‡æ–™åº«
ðŸ“‹ æ­¥é©Ÿèªªæ˜Ž
æˆ‘å·²ç¶“ç‚ºæ‚¨å»ºç«‹äº†ä¸€å€‹ GitHub Actions workflowï¼Œå¯ä»¥è‡ªå‹•åˆå§‹åŒ– Railway MySQL è³‡æ–™åº«ã€‚
æ–¹æ³• 1ï¼šåœ¨ GitHub ç¶²é ä»‹é¢æ‰‹å‹•æ–°å¢žæª”æ¡ˆï¼ˆæœ€ç°¡å–®ï¼ï¼‰
å‰å¾€æ‚¨çš„ GitHub å°ˆæ¡ˆ
https://github.com/a0908300939/food-roulette
å»ºç«‹ workflow æª”æ¡ˆ
é»žæ“Šã€ŒAdd fileã€â†’ã€ŒCreate new fileã€
æª”æ¡ˆè·¯å¾‘è¼¸å…¥ï¼š.github/workflows/init-database.yml
è¤‡è£½ä¸‹æ–¹çš„å®Œæ•´å…§å®¹è²¼ä¸Š
æäº¤æª”æ¡ˆ
é»žæ“Šã€ŒCommit changesã€
é¸æ“‡ã€ŒCommit directly to the main branchã€
é»žæ“Šã€ŒCommit changesã€
åŸ·è¡Œ workflow
å‰å¾€ã€ŒActionsã€æ¨™ç±¤
é»žæ“Šå·¦å´çš„ã€ŒInitialize Databaseã€
é»žæ“Šå³å´çš„ã€ŒRun workflowã€æŒ‰éˆ•
é¸æ“‡ã€Œmainã€åˆ†æ”¯
é»žæ“Šã€ŒRun workflowã€
æŸ¥çœ‹çµæžœ
ç­‰å¾…åŸ·è¡Œå®Œæˆï¼ˆç´„ 1-2 åˆ†é˜ ï¼‰
é»žæ“Š workflow æŸ¥çœ‹åŸ·è¡Œæ—¥èªŒ
æ‡‰è©²æœƒçœ‹åˆ°ã€Œâœ… Database initialization completed!ã€
æ–¹æ³• 2ï¼šä½¿ç”¨æœ¬åœ° Gitï¼ˆå¦‚æžœæ‚¨æœ‰ GitHub Personal Access Tokenï¼‰
åœ¨å°ˆæ¡ˆç›®éŒ„åŸ·è¡Œï¼š
Bash
git push https://ghp_YOUR_TOKEN@github.com/a0908300939/food-roulette.git
ç„¶å¾Œå‰å¾€ GitHub Actions åŸ·è¡Œï¼ˆåŒæ–¹æ³• 1 çš„æ­¥é©Ÿ 4-5 ï¼‰
ðŸ“„ Workflow æª”æ¡ˆå…§å®¹
è«‹è¤‡è£½ä»¥ä¸‹å®Œæ•´å…§å®¹åˆ° .github/workflows/init-database.ymlï¼š
YAML
name: Initialize Database

on:
  workflow_dispatch:  # æ‰‹å‹•è§¸ç™¼

jobs:
  init-db:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: Install MySQL client
        run: |
          sudo apt-get update
          sudo apt-get install -y mysql-client
      
      - name: Create SQL script
        run: |
          cat > init.sql << 'EOF'
          CREATE TABLE IF NOT EXISTS users (
            id int AUTO_INCREMENT PRIMARY KEY,
            openId varchar(64) UNIQUE,
            name text,
            email varchar(320),
            loginMethod varchar(64),
            role enum('user','merchant','admin') NOT NULL DEFAULT 'user',
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
            lastSignedIn timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            phone varchar(20) UNIQUE,
            deviceId varchar(64),
            deviceBoundAt timestamp
          );

          CREATE TABLE IF NOT EXISTS restaurants (
            id int AUTO_INCREMENT PRIMARY KEY,
            name varchar(255) NOT NULL,
            address text NOT NULL,
            latitude varchar(50),
            longitude varchar(50),
            phone varchar(20),
            description text,
            photoUrl text,
            operatingHours text NOT NULL,
            providesCheckInReward boolean NOT NULL DEFAULT false,
            isActive boolean NOT NULL DEFAULT true,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS coupons (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            title varchar(255) NOT N
init-database.yml
ç¨‹å¼ç¢¼ Â· 9.22 KB

æŸ¥çœ‹æ­¤ä»»å‹™ä¸­çš„æ‰€æœ‰æª”æ¡ˆ
å®Œç¾Žï¼æˆ‘çœ‹åˆ°æ‚¨å·²ç¶“åœ¨ GitHub å°ˆæ¡ˆé é¢äº†ï¼Œè€Œä¸”æœ€æ–°çš„ commit æ˜¯ã€Œfeat: Add merchant management system with three-tier permissionsã€ï¼ˆ6 hours agoï¼‰ã€‚
ç¾åœ¨è«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ–°å¢ž GitHub Actions workflowï¼š
ðŸ“‹ æ­¥é©Ÿ
1. é»žæ“Šã€ŒAdd fileã€æŒ‰éˆ•
åœ¨é é¢å³ä¸Šæ–¹ï¼Œé»žæ“Šã€ŒAdd fileã€â†’ é¸æ“‡ã€ŒCreate new fileã€
2. è¼¸å…¥æª”æ¡ˆè·¯å¾‘
åœ¨æª”æ¡ˆåç¨±æ¬„ä½è¼¸å…¥ï¼š
Plain Text
.github/workflows/init-database.yml
ï¼ˆæ³¨æ„ï¼šç•¶æ‚¨è¼¸å…¥ / æ™‚ï¼ŒGitHub æœƒè‡ªå‹•å»ºç«‹è³‡æ–™å¤¾ï¼‰
3. è²¼ä¸Š workflow å…§å®¹
é–‹å•Ÿæˆ‘æä¾›çš„é™„ä»¶ init-database.ymlï¼Œè¤‡è£½å…¨éƒ¨å…§å®¹ä¸¦è²¼åˆ°ç·¨è¼¯å™¨ä¸­ã€‚
4. æäº¤æª”æ¡ˆ
é»žæ“Šé é¢ä¸‹æ–¹çš„ã€ŒCommit changesã€æŒ‰éˆ•
é¸æ“‡ã€ŒCommit directly to the main branchã€
é»žæ“Šã€ŒCommit changesã€ç¢ºèª
5. åŸ·è¡Œ Workflow
é»žæ“Šé é¢ä¸Šæ–¹çš„ã€ŒActionsã€æ¨™ç±¤
æ‚¨æ‡‰è©²æœƒçœ‹åˆ°ã€ŒInitialize Databaseã€workflow
é»žæ“Šå®ƒï¼Œç„¶å¾Œé»žæ“Šã€ŒRun workflowã€æŒ‰éˆ•
è«‹å…ˆåŸ·è¡Œæ­¥é©Ÿ 1ï¼ˆé»žæ“Š Add fileï¼‰ï¼Œç„¶å¾Œå‘Šè¨´æˆ‘é€²åº¦ï¼
ðŸŽ‰ å®Œç¾Žï¼æ‚¨å·²ç¶“æˆåŠŸå»ºç«‹äº†æª”æ¡ˆï¼
æˆ‘çœ‹åˆ°æ‚¨å·²ç¶“åœ¨æ­£ç¢ºçš„ä½ç½®ï¼š
è·¯å¾‘ï¼š.github/workflows/init-database.yml
åˆ†æ”¯ï¼šmain
ç¾åœ¨è«‹ï¼š
ðŸ“ è²¼ä¸Š Workflow å…§å®¹
è«‹é–‹å•Ÿæˆ‘ä¹‹å‰æä¾›çš„é™„ä»¶ init-database.ymlï¼Œè¤‡è£½å…¨éƒ¨å…§å®¹ï¼ˆç´„ 235 è¡Œï¼‰ï¼Œç„¶å¾Œè²¼åˆ°ç·¨è¼¯å™¨ä¸­ï¼ˆå–ä»£ã€ŒEnter file contents hereã€ï¼‰ã€‚
æˆ–è€…ï¼Œæˆ‘å¯ä»¥ç›´æŽ¥æŠŠå…§å®¹è²¼åœ¨é€™è£¡è®“æ‚¨è¤‡è£½ï¼š
ç”±æ–¼å…§å®¹å¾ˆé•·ï¼Œè®“æˆ‘ç”¨å¦ä¸€ç¨®æ–¹å¼æä¾›çµ¦æ‚¨ã€‚è«‹ç¨ç­‰...
è«‹è¤‡è£½ä»¥ä¸‹å®Œæ•´å…§å®¹ï¼Œè²¼åˆ° GitHub ç·¨è¼¯å™¨ä¸­ï¼š
YAML
name: Initialize Database

on:
  workflow_dispatch:  # æ‰‹å‹•è§¸ç™¼

jobs:
  init-db:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: Install MySQL client
        run: |
          sudo apt-get update
          sudo apt-get install -y mysql-client
      
      - name: Create SQL script
        run: |
          cat > init.sql << 'EOF'
          CREATE TABLE IF NOT EXISTS users (
            id int AUTO_INCREMENT PRIMARY KEY,
            openId varchar(64) UNIQUE,
            name text,
            email varchar(320),
            loginMethod varchar(64),
            role enum('user','merchant','admin') NOT NULL DEFAULT 'user',
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
            lastSignedIn timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            phone varchar(20) UNIQUE,
            deviceId varchar(64),
            deviceBoundAt timestamp
          );

          CREATE TABLE IF NOT EXISTS restaurants (
            id int AUTO_INCREMENT PRIMARY KEY,
            name varchar(255) NOT NULL,
            address text NOT NULL,
            latitude varchar(50),
            longitude varchar(50),
            phone varchar(20),
            description text,
            photoUrl text,
            operatingHours text NOT NULL,
            providesCheckInReward boolean NOT NULL DEFAULT false,
            isActive boolean NOT NULL DEFAULT true,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS coupons (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            title varchar(255) NOT NULL,
            description text NOT NULL,
            type enum('discount','gift','cashback') NOT NULL DEFAULT 'discount',
            expiresAt timestamp,
            isActive boolean NOT NULL DEFAULT true,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS spin_history (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            restaurantId int NOT NULL,
            couponId int,
            mealPeriod enum('breakfast','lunch','afternoon_tea','dinner','late_night') NOT NULL,
            isShared boolean DEFAULT false NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS coupon_redemptions (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            restaurantId int NOT NULL,
            couponId int NOT NULL,
            spinHistoryId int,
            redeemedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS check_in_records (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            checkInDate varchar(10) NOT NULL,
            consecutiveDays int NOT NULL DEFAULT 1,
            rewardClaimed boolean NOT NULL DEFAULT false,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS push_notifications (
            id int AUTO_INCREMENT PRIMARY KEY,
            title varchar(255) NOT NULL,
            content text NOT NULL,
            imageUrl text,
            couponId int,
            status enum('draft','scheduled','sent') NOT NULL DEFAULT 'draft',
            scheduledAt timestamp,
            sentAt timestamp,
            createdBy int NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS user_notification_reads (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            notificationId int NOT NULL,
            readAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS system_settings (
            id int AUTO_INCREMENT PRIMARY KEY,
            \`key\` varchar(100) NOT NULL UNIQUE,
            value text,
            description text,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS spin_limits (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            date varchar(10) NOT NULL,
            mealPeriod enum('breakfast','lunch','afternoon_tea','dinner','late_night') NOT NULL,
            usedCount int NOT NULL DEFAULT 0,
            dailyCouponCount int NOT NULL DEFAULT 0,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS custom_wheel_styles (
            id int AUTO_INCREMENT PRIMARY KEY,
            name varchar(255) NOT NULL,
            type enum('canvas','image') NOT NULL DEFAULT 'canvas',
            style varchar(100) NOT NULL,
            imageUrl text,
            config text,
            isDefault boolean NOT NULL DEFAULT false,
            createdBy int NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS merchants (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL UNIQUE,
            name varchar(255) NOT NULL,
            contactPhone varchar(20),
            contactEmail varchar(320),
            status enum('active','suspended','inactive') DEFAULT 'active' NOT NULL,
            notes text,
            createdBy int NOT NULL,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            INDEX idx_userId (userId),
            INDEX idx_status (status)
          );

          CREATE TABLE IF NOT EXISTS merchant_restaurants (
            id int AUTO_INCREMENT PRIMARY KEY,
            merchantId int NOT NULL,
            restaurantId int NOT NULL,
            boundAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            boundBy int NOT NULL,
            UNIQUE KEY unique_merchant_restaurant (merchantId, restaurantId),
            INDEX idx_merchantId (merchantId),
            INDEX idx_restaurantId (restaurantId)
          );

          CREATE TABLE IF NOT EXISTS restaurant_statistics (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            date varchar(10) NOT NULL,
            totalSpins int DEFAULT 0 NOT NULL,
            breakfastSpins int DEFAULT 0 NOT NULL,
            lunchSpins int DEFAULT 0 NOT NULL,
            afternoonTeaSpins int DEFAULT 0 NOT NULL,
            dinnerSpins int DEFAULT 0 NOT NULL,
            lateNightSpins int DEFAULT 0 NOT NULL,
            couponsIssued int DEFAULT 0 NOT NULL,
            couponsRedeemed int DEFAULT 0 NOT NULL,
            redemptionRate int DEFAULT 0 NOT NULL,
            uniqueUsers int DEFAULT 0 NOT NULL,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            UNIQUE KEY unique_restaurant_date (restaurantId, date),
            INDEX idx_restaurantId (restaurantId),
            INDEX idx_date (date)
          );

          CREATE TABLE IF NOT EXISTS restaurant_reviews (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            userId int NOT NULL,
            rating int NOT NULL,
            comment text,
            photoUrls text,
            isApproved boolean DEFAULT FALSE NOT NULL,
            approvedBy int,
            approvedAt timestamp,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            INDEX idx_restaurantId (restaurantId),
            INDEX idx_userId (userId),
            INDEX idx_isApproved (isApproved)
          );
          EOF
      
      - name: Execute SQL script
        env:
          MYSQL_HOST: mysql-agalev.proxy.rlwy.net
          MYSQL_PORT: 49836
          MYSQL_USER: root
          MYSQL_PASSWORD: NCrfEbBAwIXZSJDHULrmZSJSwJKTqmyy
          MYSQL_DATABASE: railway
        run: |
          mysql -h $MYSQL_HOST -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD $MYSQL_DATABASE < init.sql
          echo "âœ… Database initialization completed!"
      
      - name: Verify tables
        env:
          MYSQL_HOST: mysql-agalev.proxy.rlwy.net
          MYSQL_PORT: 49836
          MYSQL_USER: root
          MYSQL_PASSWORD: NCrfEbBAwIXZSJDHULrmZSJSwJKTqmyy
          MYSQL_DATABASE: railway
        run: |
          echo "ðŸ“‹ Verifying tables..."
          mysql -h $MYSQL_HOST -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD $MYSQL_DATABASE -e "SHOW TABLES;"
è²¼ä¸Šå¾Œï¼Œé»žæ“Šå³ä¸Šè§’çš„ã€ŒCommit changes...ã€æŒ‰éˆ•ï¼
Manus å°‡åœ¨ä½ å›žè¦†å¾Œç¹¼çºŒå·¥ä½œ
å‚³é€è¨Šæ¯çµ¦ Manus

init-database.yml
name: Initialize Database

on:
  workflow_dispatch:  # æ‰‹å‹•è§¸ç™¼

jobs:
  init-db:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: Install MySQL client
        run: |
          sudo apt-get update
          sudo apt-get install -y mysql-client
      
      - name: Create SQL script
        run: |
          cat > init.sql << 'EOF'
          CREATE TABLE IF NOT EXISTS users (
            id int AUTO_INCREMENT PRIMARY KEY,
            openId varchar(64) UNIQUE,
            name text,
            email varchar(320),
            loginMethod varchar(64),
            role enum('user','merchant','admin') NOT NULL DEFAULT 'user',
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
            lastSignedIn timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            phone varchar(20) UNIQUE,
            deviceId varchar(64),
            deviceBoundAt timestamp
          );

          CREATE TABLE IF NOT EXISTS restaurants (
            id int AUTO_INCREMENT PRIMARY KEY,
            name varchar(255) NOT NULL,
            address text NOT NULL,
            latitude varchar(50),
            longitude varchar(50),
            phone varchar(20),
            description text,
            photoUrl text,
            operatingHours text NOT NULL,
            providesCheckInReward boolean NOT NULL DEFAULT false,
            isActive boolean NOT NULL DEFAULT true,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS coupons (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            title varchar(255) NOT NULL,
            description text NOT NULL,
            type enum('discount','gift','cashback') NOT NULL DEFAULT 'discount',
            expiresAt timestamp,
            isActive boolean NOT NULL DEFAULT true,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS spin_history (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            restaurantId int NOT NULL,
            couponId int,
            mealPeriod enum('breakfast','lunch','afternoon_tea','dinner','late_night') NOT NULL,
            isShared boolean DEFAULT false NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS coupon_redemptions (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            restaurantId int NOT NULL,
            couponId int NOT NULL,
            spinHistoryId int,
            redeemedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS check_in_records (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            checkInDate varchar(10) NOT NULL,
            consecutiveDays int NOT NULL DEFAULT 1,
            rewardClaimed boolean NOT NULL DEFAULT false,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS push_notifications (
            id int AUTO_INCREMENT PRIMARY KEY,
            title varchar(255) NOT NULL,
            content text NOT NULL,
            imageUrl text,
            couponId int,
            status enum('draft','scheduled','sent') NOT NULL DEFAULT 'draft',
            scheduledAt timestamp,
            sentAt timestamp,
            createdBy int NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS user_notification_reads (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            notificationId int NOT NULL,
            readAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS system_settings (
            id int AUTO_INCREMENT PRIMARY KEY,
            \`key\` varchar(100) NOT NULL UNIQUE,
            value text,
            description text,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS spin_limits (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL,
            date varchar(10) NOT NULL,
            mealPeriod enum('breakfast','lunch','afternoon_tea','dinner','late_night') NOT NULL,
            usedCount int NOT NULL DEFAULT 0,
            dailyCouponCount int NOT NULL DEFAULT 0,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS custom_wheel_styles (
            id int AUTO_INCREMENT PRIMARY KEY,
            name varchar(255) NOT NULL,
            type enum('canvas','image') NOT NULL DEFAULT 'canvas',
            style varchar(100) NOT NULL,
            imageUrl text,
            config text,
            isDefault boolean NOT NULL DEFAULT false,
            createdBy int NOT NULL,
            createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
          );

          CREATE TABLE IF NOT EXISTS merchants (
            id int AUTO_INCREMENT PRIMARY KEY,
            userId int NOT NULL UNIQUE,
            name varchar(255) NOT NULL,
            contactPhone varchar(20),
            contactEmail varchar(320),
            status enum('active','suspended','inactive') DEFAULT 'active' NOT NULL,
            notes text,
            createdBy int NOT NULL,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            INDEX idx_userId (userId),
            INDEX idx_status (status)
          );

          CREATE TABLE IF NOT EXISTS merchant_restaurants (
            id int AUTO_INCREMENT PRIMARY KEY,
            merchantId int NOT NULL,
            restaurantId int NOT NULL,
            boundAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            boundBy int NOT NULL,
            UNIQUE KEY unique_merchant_restaurant (merchantId, restaurantId),
            INDEX idx_merchantId (merchantId),
            INDEX idx_restaurantId (restaurantId)
          );

          CREATE TABLE IF NOT EXISTS restaurant_statistics (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            date varchar(10) NOT NULL,
            totalSpins int DEFAULT 0 NOT NULL,
            breakfastSpins int DEFAULT 0 NOT NULL,
            lunchSpins int DEFAULT 0 NOT NULL,
            afternoonTeaSpins int DEFAULT 0 NOT NULL,
            dinnerSpins int DEFAULT 0 NOT NULL,
            lateNightSpins int DEFAULT 0 NOT NULL,
            couponsIssued int DEFAULT 0 NOT NULL,
            couponsRedeemed int DEFAULT 0 NOT NULL,
            redemptionRate int DEFAULT 0 NOT NULL,
            uniqueUsers int DEFAULT 0 NOT NULL,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            UNIQUE KEY unique_restaurant_date (restaurantId, date),
            INDEX idx_restaurantId (restaurantId),
            INDEX idx_date (date)
          );

          CREATE TABLE IF NOT EXISTS restaurant_reviews (
            id int AUTO_INCREMENT PRIMARY KEY,
            restaurantId int NOT NULL,
            userId int NOT NULL,
            rating int NOT NULL,
            comment text,
            photoUrls text,
            isApproved boolean DEFAULT FALSE NOT NULL,
            approvedBy int,
            approvedAt timestamp,
            createdAt timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
            updatedAt timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,
            INDEX idx_restaurantId (restaurantId),
            INDEX idx_userId (userId),
            INDEX idx_isApproved (isApproved)
          );
          EOF
      
      - name: Execute SQL script
        env:
          MYSQL_HOST: mysql-agalev.proxy.rlwy.net
          MYSQL_PORT: 49836
          MYSQL_USER: root
          MYSQL_PASSWORD: NCrfEbBAwIXZSJDHULrmZSJSwJKTqmyy
          MYSQL_DATABASE: railway
        run: |
          mysql -h $MYSQL_HOST -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD $MYSQL_DATABASE < init.sql
          echo "âœ… Database initialization completed!"
      
      - name: Verify tables
        env:
          MYSQL_HOST: mysql-agalev.proxy.rlwy.net
          MYSQL_PORT: 49836
          MYSQL_USER: root
          MYSQL_PASSWORD: NCrfEbBAwIXZSJDHULrmZSJSwJKTqmyy
          MYSQL_DATABASE: railway
        run: |
          echo "ðŸ“‹ Verifying tables..."
          mysql -h $MYSQL_HOST -P $MYSQL_PORT -u $MYSQL_USER -p$MYSQL_PASSWORD $MYSQL_DATABASE -e "SHOW TABLES;"

How to Access and Use Manus Replay Link - Manus
